(function(e){function t(t){for(var a,n,i=t[0],c=t[1],u=t[2],p=0,d=[];p<i.length;p++)n=i[p],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&d.push(s[n][0]),s[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=r[0]))}return e}var a={},s={app:0},o=[];function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("85ec"),s=r.n(a);s.a},3126:function(e,t,r){"use strict";var a=r("b8d3"),s=r.n(a);s.a},5601:function(e,t,r){"use strict";var a=r("86c9"),s=r.n(a);s.a},"56d7":function(e,t,r){"use strict";r.r(t);var a=r("2b0e"),s=r("bc3a"),o=r.n(s);const n={},i=o.a.create(n);i.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=i,window.axios=i,Object.defineProperties(e.prototype,{axios:{get(){return i}},$axios:{get(){return i}}})},a["default"].use(Plugin);Plugin;var c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},u=[],l={name:"app"},p=l,d=(r("034f"),r("2877")),h=Object(d["a"])(p,c,u,!1,null,null,null),m=h.exports,f=r("8c4f"),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shopping-cart-page"},[r("ShoppingItem",{attrs:{product:e.product}})],1)},g=[],v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shopping-item"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slog:"header"}},[r("h2",[e._v("Shopping Cart")])]),r("hr"),r("div",{staticClass:"box-body"},[r("el-row",{staticClass:"product-row",attrs:{gutter:12}},[r("el-col",{staticClass:"image-container",attrs:{span:10}},[r("img",{staticClass:"product-image",attrs:{src:e.product.image}})]),r("el-col",{staticClass:"product-desc",attrs:{span:14}},[r("h2",[e._v(e._s(e.product.name))]),r("div",{staticClass:"product-category"},[e._v(e._s(e.product.category))]),r("div",{staticClass:"product-description"},[r("span",{domProps:{innerHTML:e._s(e.product.description)}})]),r("el-row",{attrs:{id:"price-quantity"}},[r("el-col",{staticClass:"price-container",attrs:{span:12}},[r("div",[e._v("Price")]),r("div",[e._v(" USD "),r("span",{staticClass:"price-value"},[e._v(" "+e._s(e.priceString(e.product.price))+" ")])])]),r("el-col",{staticClass:"quantity-container",attrs:{span:12}},[r("div",[e._v("Quantity")]),r("el-input-number",{attrs:{size:"mini",min:1,max:10},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1)],1),r("el-row",{attrs:{id:"paypal-button"}}),r("div",{staticClass:"paypal-button-container"},[r("Paypal",{attrs:{amount:e.payAmount}})],1)],1)],1)],1)])],1)},b=[],_=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},C=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{attrs:{id:"paypal-button-container"}})])}],k={name:"paypal",props:{amount:{type:Number,default:0},currency:{type:String,default:"USD"}},data(){return{success:!1,error:!1}},mounted(){const e=(e,t)=>{console.log("create order");const r={amount:this.amount,currency:this.currency};return this.createPaypalOrder({data:r}).then(e=>e.data.orderID).catch(e=>{console.log("create order error: ",e),this.error=!0})},t=e=>{const t=e.orderID;this.captureOrder(t).then(e=>{console.log("order payment: ",e),this.checkoutComplete(!0,e.data)}).catch(e=>{console.log("order capture failed: ",e),this.checkoutComplete(!1,null)})};paypal.Buttons({env:"sandbox",style:{locale:"en-US",layout:"horizontal",size:"responsive",color:"gold",shape:"rect",label:"checkout",tagline:"false",fundingSource:paypal.FUNDING.PAYPAL},createOrder:e,onApprove:t}).render("#paypal-button-container")},methods:{async createPaypalOrder(e){const t=await axios.post("http://localhost:1337/create-payment",e);return t},async captureOrder(e){const t=await axios.post("http://localhost:1337/checkout-paypal",{orderID:e});return t},checkoutComplete(e,t){e?(this.success=!0,this.$store.commit("setCheckoutResult",{isComplete:!0,hasError:!1,payerInfo:t}),this.$router.push({name:"CheckoutResult"})):(this.error=!0,this.$store.commit("setCheckoutResult",{isComplete:!1,hasError:!0,payerInfo:{}}),this.$router.push("CheckoutResult"))}}},x=k,w=(r("5601"),Object(d["a"])(x,_,C,!1,null,"d560eb4c",null)),P=w.exports,O={name:"ShoppingItem",props:{product:Object},components:{Paypal:P},data(){return{quantity:1}},computed:{payAmount(){return this.product.price*this.quantity}},methods:{priceString(e){const t=Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)}}},S=O,j=(r("3126"),Object(d["a"])(S,v,b,!1,null,"b538fbf4",null)),$=j.exports,I={name:"Shopping Cart",data(){return{message:"This is an about page",product:{image:"https://images.philips.com/is/image/PhilipsConsumer/TAKH402PK_00-IMS-en_SG?wid=840&hei=720&$jpglarge$",name:"BeoPlay H4 Wireless Headphones",category:"Bang & Olufsen",price:199,description:"<ul>\n        <li>Lightweight design makes it ideal for listening while during exercise, travel or for everyday wear</li>\n        <li>Hard chrome earphone finishes for rugged durability and everlasting shine</li>\n        <li>Precision machined single billet metal housing prevents vibrations</li>\n        </ul>"}}},methods:{reverseMessage(){this.message=this.message.split("").reverse().join(""),console.log(this.message)}},components:{ShoppingItem:$}},E=I,N=Object(d["a"])(E,y,g,!1,null,null,null),q=N.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{attrs:{id:"checkout-result-page"}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e.success?r("h2",[e._v("Congratulations")]):e._e(),e.error?r("h2",[e._v("Ooops")]):e._e()]),r("div",{staticClass:"box-body"},[e.success?r("div",[e._v(" "+e._s(e.payerName)+", your payment has been completed successfully. ")]):e._e(),e.error?r("div",[e._v(" Your payment has failed. Please try again. ")]):e._e(),r("div",{attrs:{id:"home-link"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.gotoHome}},[e._v("Home")])],1)])])],1)},D=[],M={name:"CheckoutResult",data(){return{lastName:"",firstName:"",success:!1,error:!1}},computed:{payerName(){return this.lastName+" "+this.firstName}},created(){this.success=this.$store.state.checkoutComplete,this.error=this.$store.state.checkoutError,this.success&&this.$store.state.payerInfo&&(this.lastName=this.$store.state.payerInfo.last_name,this.firstName=this.$store.state.payerInfo.first_name)},methods:{gotoHome(){this.$router.replace("/")}}},R=M,A=(r("d515"),Object(d["a"])(R,H,D,!1,null,"28da0ad6",null)),T=A.exports;a["default"].use(f["a"]);const U=[{path:"/",name:"ShoppingCart",component:q},{path:"/checkout-result",name:"CheckoutResult",component:T}],z=new f["a"]({mode:"history",base:"/",routes:U});var B=z,L=r("2f62");a["default"].use(L["a"]);var F=new L["a"].Store({state:{checkoutComplete:!1,checkoutError:!1,payerInfo:{}},mutations:{setCheckoutResult(e,{isComplete:t,hasError:r,payerInfo:a}){e.checkoutComplete=t,e.checkoutError=r,e.payerInfo=a},clearCheckoutState(e){e.checkoutComplete=!1,e.checkoutError=!1,e.payerInfo={}}},actions:{},modules:{}}),G=r("5c96"),J=r.n(G),K=(r("0fae"),r("b2d6")),Y=r.n(K);a["default"].use(J.a,{locale:Y.a}),a["default"].config.productionTip=!1,new a["default"]({router:B,store:F,render:function(e){return e(m)}}).$mount("#app")},"85ec":function(e,t,r){},"86c9":function(e,t,r){},b8d3:function(e,t,r){},d515:function(e,t,r){"use strict";var a=r("f073"),s=r.n(a);s.a},f073:function(e,t,r){}});
//# sourceMappingURL=app.a044c9b8.js.map